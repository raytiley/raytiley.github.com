<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>raytiley.github.io</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <h1>  </h1>
      Posted On: February 21, 2015
      <hr />
      <iframe
  width="178" height="24" style="border:0px"
  src="https://mixonic.github.io/ember-community-versions/2015/02/21/using-the-component-helper">
</iframe>
<p>It is a week before I head off to EmberConf and I'm sitting in a bar thinking it is about time I start sharing some of the knowledge I steal from the very friendly folks in #emberjs. The past few weeks I've been working on our scheduling interface, porting some ASP.NET webforms to ember. During this process I've run into multiple situations where I need to make a choice about what <code>component</code> to render.</p>
<p>Before <a href="https://github.com/emberjs/ember.js/pull/10093">PR 10093</a> I would have likely done this with some pretty ugly, but totally functional <code>if</code> helpers like so.</p>
<pre class="language-handlebars"><code class="language-handlebars">{% raw %}<br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#each</span> <span class="token variable">item</span> <span class="token variable">in</span> <span class="token variable">schedule</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isRun</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">run-schedule-item</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isGap</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">gap-schedule-item</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isManualEvent</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">manual-event-schedule-item</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/each</span><span class="token delimiter punctuation">}}</span></span><br>{% endraw %}</code></pre>
<p>Here are my top complaints with this approach.</p>
<ul>
<li>
<p>The things we are rendering have a property that dictates how it is displayed. Sounds like some pretty tight coupling.</p>
</li>
<li>
<p>It is fairly verbose. With only three choices it is managable now, but what if we had ten choices, or a hundred? This template could get overwhelming fast.</p>
</li>
<li>
<p>My choices are limited. Because the component I am rendering is hard coded into the template, this approach only works well if there is one factor that decides what component to pick. If the choice is more complicated the code quickly becomes unbearable.</p>
</li>
</ul>
<p>One of the requirements for the re-write of our schedule is that it responsive. Our current product is pretty much unusable on a mobile device, and if we are redoing it, might as well fix that in the process. I am sure there are CSS wizards that could make our schedule amazing with media queries alone. I am not that person, it is just too damn hard. If I am writing a JavaScript application, why do I need to limit myself to CSS to make something work on mobile?</p>
<p>Further, the interactions I want to provide to my users change when on a mobile device. Simply making columns colapse and hiding some elements using CSS isn't going to cut it. I actually want to render a different component, with different behaviors depending on what screen size is used. Borrowing a phrase from my github crush @rwjblue, &quot;the last part is the sticky wicket&quot;.</p>
<p>Here is some incomprehensible code that might work.</p>
<pre class="language-handlebars"><code class="language-handlebars">{% raw %}<br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#each</span> <span class="token variable">item</span> <span class="token variable">in</span> <span class="token variable">schedule</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isSm</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isRun</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">run-schedule-item-sm</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isGap</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">gap-schedule-item-sm</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isManualEvent</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">manual-event-schedule-item-sm</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isMd</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isRun</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">run-schedule-item-md</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isGap</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">gap-schedule-item-md</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isManualEvent</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">manual-event-schedule-item-md</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isLg</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isRun</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">run-schedule-item-lg</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isGap</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">gap-schedule-item-lg</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">isManualEvent</span><span class="token delimiter punctuation">}}</span></span><br>	    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">manual-event-schedule-item-lg</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>	  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/each</span><span class="token delimiter punctuation">}}</span></span><br>{% endraw %}</code></pre>
<p>The above code is ridiculous. I have three breakpoints, and three different items that I <em>might</em> need to render differently. If the types of items in my list grows or god forbid I add another break point the template gets even more messy.</p>
<p>Enter the <code>component</code> helper that is currently in <a href="http://emberjs.com/builds/#/beta">1.11 beta</a>. The basic gist is that you can pass a property that will be the name of the component your going to render. It sounds simple, but is crazy powerful. It simplifies our fist code example to the following.</p>
<pre class="language-handlebars"><code class="language-handlebars">{% raw %}<br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#each</span> <span class="token variable">item</span> <span class="token variable">in</span> <span class="token variable">schedule</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">component</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">component</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/each</span><span class="token delimiter punctuation">}}</span></span><br>{% endraw %}</code></pre>
<p>There are still some problems here. The component being rendered is still determined by the item itself, but we'll break this coupling soon. Still it is a lot cleaner. Our responsive example can benfit too.</p>
<pre class="language-handlebars"><code class="language-handlebars">{% raw %}<br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#each</span> <span class="token variable">item</span> <span class="token variable">in</span> <span class="token variable">schedule</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isSm</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">component</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">smComponent</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isMd</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">component</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">mdComponent</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#if</span> <span class="token variable">media</span><span class="token punctuation">.</span><span class="token variable">isLg</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">component</span> <span class="token variable">item</span><span class="token punctuation">.</span><span class="token variable">lgComponent</span> <span class="token variable">item</span><span class="token punctuation">=</span><span class="token variable">item</span><span class="token delimiter punctuation">}}</span></span><br>  <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/each</span><span class="token delimiter punctuation">}}</span></span><br>{% endraw %}</code></pre>
<p>Now I <em>could</em> inject <code>media</code> into my models and make the <code>component</code> property on <code>item</code> a computed property that would return the appropriate responsive helper depending on the current breakpoint size. But there is only so much I'm willing to do in the name of making my handlebars (HTMLbars?) templates cleaner.</p>
<p>What I really want to do is isolate the choice of my component so that logic isn't hard coded in my template or my model. Luckily we can do just that using nested helpers (aka subexpressions). Read on to to my next post, <a href="/posts/handlebars-sub-expresions-aka-nested-helpers">Using Nested Helpers in Ember.js</a>, to see how.</p>
<p>If anyone sees me at EmberConf remind me to buy @lukemelia a beer for getting the <code>component</code> helper into core.</p>
<p>This is my first attempt at writing a blog post, let alone a technical one. If I screwed up royally please let me know on twitter @raytiley and I'll try to correct ASAP. Hopefully there is more to come. I'm doing a lot of Ember lately and really digging it.</p>


        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'raytiley'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          
    </div>
    <script src="javascripts/scale.fix.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2186528-10', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>